import"./default-e5d332e7.js";import{_ as Z}from"./index-98bb1baa.js";import{B as j}from"./index-8134270f.js";import{F as ee,_ as te}from"./index-0fb4fca2.js";import"./index-1729d7ee.js";import"./index-7f28f9f3.js";import"./index-3ade0bc5.js";import{I as ne}from"./index-da5f4ce2.js";import{M as ae}from"./index-7b312ce6.js";import{_ as oe}from"./index-ee3da9b4.js";import{r as M,a as S,y as re,B as i,G as k,L as b,c as n,D as t,E as e,K as C,H as D,$ as v,a0 as le,I as _,C as y,J as F}from"./index-71a5391b.js";import{_ as V,a as se,b as ie,c as me,d as ue}from"./repeatpositioner-3854e0ff.js";import{_ as pe}from"./repeatcard-74591095.js";import{_ as ce}from"./loading-c4a3f1f3.js";import{_ as _e}from"./previewimg-94f88633.js";import{_ as de}from"./previewaudio-e54f742a.js";import{aa as fe}from"./api-47b35210.js";import{F as ge}from"./FieldTimeOutlined-51f3237f.js";import{E as ye}from"./DialogWrap-9db0e3d6.js";import"./eagerComputed-c651f318.js";import"./omit-e3ca0eeb.js";import"./createForOfIteratorHelper-f2236921.js";import"./index-bd4b2240.js";import"./shallowequal-0f2097ab.js";import"./index-67c02b9a.js";import"./index-8ca851ae.js";import"./index-116a0eec.js";import"./scrollTo-4a3c9ce6.js";import"./LeftOutlined-fcc01204.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ArrowLeftOutlined-83eed4e5.js";import"./index-79080fe8.js";const he={key:0,style:{"column-count":"5","column-gap":"15px"}},ke={style:{margin:"10px 0 10px 10px"}},be={style:{margin:"10px 0 10px 10px"}},ve={style:{width:"100%","margin-bottom":"10px","margin-left":"10px","padding-right":"10px","line-height":"25px"}},we={style:{"text-align":"right"},id:"bottomDom"},xe={style:{"column-count":"3","column-gap":"15px"}},at={__name:"asmr",setup(Se){const B=M(),r=S({title:"",currentPage:1,pageSizes:50}),d=S({data:[],total:0});let z=M("1");const w=()=>{z.value="1",d.total=0,d.data=[]},A=()=>{w(),B.value.resetFields(),r.currentPage=1,r.pageSizes=50,x()},I=a=>{w(),r.currentPage=1,r.pageSizes=50,x()};re(()=>{x()});const x=()=>{fe(r).then(a=>{d.data=a.data.data,d.total=a.data.total,z.value="0"})},O=({page:a,pageSize:s})=>{w(),r.currentPage=a,r.pageSizes=s,x()},T=({current:a,size:s})=>{w(),r.currentPage=a,r.pageSizes=s},E=a=>{w(),r.currentPage=a,x()},K=a=>{switch(a){case 1:document.querySelector("#bottomDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break;case 2:document.querySelector("#submitDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break}},N=a=>{window.open(a,"_blank")},g=S({state:!1,title:"",imgs:[]}),R=a=>{let s=a.map(l=>l.type=="folder"?l.children.map(p=>p.type=="folder"?p.children.map(c=>c.type=="folder"?c.children.map(u=>({...u})):c):p):l).flat(3);g.state=!0,g.imgs=s.filter(l=>l.type=="image").map(l=>l.mediaStreamUrl),g.title="查看详情图片"},m=S({state:!1,title:"",music:[]}),q=a=>{let s=a.map(l=>l.type=="folder"?l.children.map(p=>p.type=="folder"?p.children.map(c=>c.type=="folder"?c.children.map(u=>({...u})):c):p):l).flat(3);m.state=!0,m.music=s.filter(l=>l.type!="image").map(l=>({...l,state:!1})),m.title="播放列表"},J=()=>{m.music=[]};let L=S([{title:"标题",dataIndex:"title",width:300,key:"title"},{title:"简介",dataIndex:"workTitle",key:"workTitle"},{title:"操作",align:"right",width:600,key:"asmr"}]);const G=a=>{m.music=m.music.map(s=>({...s,state:!1})),m.music[a].state=!0},H=a=>{window.open(a)},Q=()=>{g.imgs=[]};return(a,s)=>{const l=ne,p=te,c=me,u=j,W=ue,X=ee,P=oe,U=ae,Y=Z;return i(),k(C,null,[b("div",null,[n(X,{id:"submitDom",model:e(r),ref_key:"formRef",ref:B,name:"basic","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",onFinish:I},{default:t(()=>[n(W,null,{default:t(()=>[n(c,{span:6},{default:t(()=>[n(p,{label:"标 题",name:"title"},{default:t(()=>[n(l,{value:e(r).title,"onUpdate:value":s[0]||(s[0]=o=>e(r).title=o),onKeydown:le(I,["enter","native"])},null,8,["value","onKeydown"])]),_:1})]),_:1}),n(c,{span:6},{default:t(()=>[n(p,{"wrapper-col":{offset:2,span:22}},{default:t(()=>[n(u,{type:"primary","html-type":"submit"},{default:t(()=>[_("提交")]),_:1}),n(u,{style:{"margin-left":"10px"},onClick:A},{default:t(()=>[_("重置")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),n(V,{total:e(d).total,currentPage:e(r).currentPage,pageSizes:e(r).pageSizes,onOnpagechange:O,onOnsizechange:T},null,8,["total","currentPage","pageSizes"]),e(d).data.length!==0?(i(),k("div",he,[(i(!0),k(C,null,D(e(d).data,(o,f)=>(i(),y(pe,{key:f,item:{...o,bj:o.mainCoverUrl}},{time:t(()=>[b("p",ke,[n(P,{color:"orange"},{icon:t(()=>[n(e(ge))]),default:t(()=>[_(" "+F(o.release),1)]),_:2},1024)])]),watch:t(()=>[b("p",be,[n(P,{color:"green"},{icon:t(()=>[n(e(ye))]),default:t(()=>[_(" "+F(o.rate_count),1)]),_:2},1024)])]),tag:t(()=>[b("div",ve,[(i(!0),k(C,null,D(o.tags,(h,$)=>(i(),y(P,{color:"blue",key:$},{default:t(()=>[_(F(h.name),1)]),_:2},1024))),128))])]),button:t(()=>[o.music.length!==0?(i(),y(u,{key:0,type:"dashed",style:{margin:"0 0 10px 10px"},onClick:h=>R(o.music)},{default:t(()=>[_("查看图片 ")]),_:2},1032,["onClick"])):v("",!0),o.music.length!==0?(i(),y(u,{key:1,type:"dashed",style:{margin:"0 0 10px 10px"},onClick:h=>q(o.music)},{default:t(()=>[_("播放列表 ")]),_:2},1032,["onClick"])):v("",!0),n(u,{type:"dashed",style:{margin:"0 0 10px 10px"},onClick:h=>N(`https://www.asmr.one/work/RJ0${o.id}`)},{default:t(()=>[_("跳转详情 ")]),_:2},1032,["onClick"])]),_:2},1032,["item"]))),128))])):v("",!0),n(ce,{state:e(z)},null,8,["state"]),b("div",we,[n(V,{total:e(d).total,currentPage:e(r).currentPage,pageSizes:e(r).pageSizes,onOnpagechange:O,onOnsizechange:T},null,8,["total","currentPage","pageSizes"])]),n(se,{total:e(d).total,currentPage:e(r).currentPage,pageSizes:e(r).pageSizes,onOnpageturning:E},null,8,["total","currentPage","pageSizes"]),n(ie,{onOnTo:K}),n(U,{visible:e(g).state,"onUpdate:visible":s[1]||(s[1]=o=>e(g).state=o),footer:null,width:"80%",onCancel:Q,title:e(g).title},{default:t(()=>[b("div",xe,[(i(!0),k(C,null,D(e(g).imgs,(o,f)=>(i(),y(_e,{key:f,item:o},null,8,["item"]))),128))])]),_:1},8,["visible","title"]),n(U,{visible:e(m).state,"onUpdate:visible":s[2]||(s[2]=o=>e(m).state=o),footer:null,width:"80%",onCancel:J,title:e(m).title},{default:t(()=>[n(Y,{dataSource:e(m).music,columns:e(L),pagination:!1},{bodyCell:t(({column:o,record:f,index:h})=>[o.key==="asmr"?(i(),k(C,{key:0},[f.state?(i(),y(de,{key:0,src:f.mediaStreamUrl},null,8,["src"])):v("",!0),!f.state&&f.type==="audio"?(i(),y(u,{key:1,type:"dashed",onClick:$=>G(h)},{default:t(()=>[_("点击播放 ")]),_:2},1032,["onClick"])):v("",!0),n(u,{type:"dashed",style:{"margin-left":"10px"},onClick:$=>H(f.mediaDownloadUrl)},{default:t(()=>[_("点击下载")]),_:2},1032,["onClick"])],64)):v("",!0)]),_:1},8,["dataSource","columns"])]),_:1},8,["visible","title"])],64)}}};export{at as default};
