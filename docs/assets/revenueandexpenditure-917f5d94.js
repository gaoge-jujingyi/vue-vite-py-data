import"./default-e5d332e7.js";import{M as pe}from"./index-7b312ce6.js";import{B as me}from"./index-8134270f.js";import{I as de}from"./index-da5f4ce2.js";import{_ as _e,a as ce,c as fe,d as ye,b as ge}from"./repeatpositioner-3854e0ff.js";import{_ as ve}from"./index-98bb1baa.js";import{F as be,_ as ke}from"./index-0fb4fca2.js";import{_ as xe,a as we}from"./index-1729d7ee.js";import"./index-7f28f9f3.js";import"./index-3ade0bc5.js";import{_ as Se}from"./index-ee3da9b4.js";import{_ as ze}from"./index-79080fe8.js";import{D as Ce}from"./index-898ceaa4.js";import{a as f,r as k,y as Pe,B as p,G as x,L as w,c as e,D as t,E as a,C as y,$ as z,K as C,H as E,I as r,J as A,a0 as B,b8 as q}from"./index-71a5391b.js";import{aQ as he,aU as De,aV as Ie,aW as Ue,aX as Fe}from"./api-47b35210.js";/* empty css              */import{_ as Be}from"./index-116a0eec.js";import"./DialogWrap-9db0e3d6.js";import"./omit-e3ca0eeb.js";import"./index-8ca851ae.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ArrowLeftOutlined-83eed4e5.js";import"./eagerComputed-c651f318.js";import"./createForOfIteratorHelper-f2236921.js";import"./index-bd4b2240.js";import"./shallowequal-0f2097ab.js";import"./index-67c02b9a.js";import"./scrollTo-4a3c9ce6.js";import"./LeftOutlined-fcc01204.js";const qe="/vue-vite-py-data/assets/账单-bf89c9df.png",Ke={style:{"margin-bottom":"10px"}},Oe={style:{"margin-top":"10px"}},Ye={style:{"text-align":"right","margin-top":"10px"},id:"bottomDom"},ct={__name:"revenueandexpenditure",setup(Me){let P=f([]),G=f([{title:"ICO",dataIndex:"ico",key:"ico"},{title:"类型(收入/支出)",dataIndex:"type",key:"type"},{title:"账单时间",dataIndex:"time",key:"time"},{title:"储蓄卡",dataIndex:"position",key:"position"},{title:"金额(￥)",dataIndex:"money",key:"money"},{title:"消费名目",dataIndex:"title",key:"title"},{title:"备注",dataIndex:"notes",key:"notes"},{title:"操作",width:220,key:"debitcard"}]),m=f({state:!1,title:""}),h=k(!0),K=f([]),D=f([]);Pe(()=>{d(),H()});let s=f({type:"",time:"",position:"",title:"",currentPage:1,pageSizes:50}),g=k(0),I=k(!0);const H=async()=>{I.value=!1;let l=await he();K=l.data,D=l.data,D.unshift({name:"全部"}),I.value=!0},d=async()=>{h.value=!1;let l=await De(s);g.value=l.data.total,P=l.data.data.map(n=>({...n,ico:qe})),h.value=!0},J=l=>{i.type=l.type,i.time=l.time,i.position=l.position,i.money=l.money,i.title=l.title,i.notes=l.notes,i._id=l._id,m.title="编辑账单",m.state=!0},Q=async l=>{let n=await Ie({_id:l});q.success(n.msg),d()},W=()=>{i.type="支出",i.time="",i.position="工商银行",i.money="",i.title="",i.notes="",i._id="",m.title="创建账单",m.state=!0},X=()=>{},i=f({type:"支出",time:"",position:"工商银行",money:"",title:"",notes:"",_id:""}),j=async l=>{if(l.money=l.money*1,m.title==="创建账单"){let n=await Ue(l);q.success(n.msg)}else if(m.title==="编辑账单"){let n=await Fe({_id:i._id,parameter:l});q.success(n.msg)}M(),m.state=!1,m.title="",d()},O=k(),Y=k(),M=()=>{O.value.resetFields()},Z=()=>{Y.value.resetFields(),d()},U=()=>{g.value=0,P=[]},V=({page:l,pageSize:n})=>{U(),s.currentPage=l,s.pageSizes=n,d()},R=({current:l,size:n})=>{U(),s.currentPage=l,s.pageSizes=n},ee=l=>{U(),s.currentPage=l,d()},te=l=>{switch(l){case 1:document.querySelector("#bottomDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break;case 2:document.querySelector("#submitDom").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});break}};return(l,n)=>{const c=xe,S=we,u=ke,v=fe,N=Ce,F=de,_=me,ae=ye,$=be,L=_e,ne=ze,T=Se,oe=ve,le=ce,ie=ge,se=Be,re=pe;return p(),x("div",null,[w("div",null,[e($,{id:"submitDom",model:a(s),ref_key:"formRefinit",ref:Y,name:"basicinit","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",onFinish:d},{default:t(()=>[e(ae,null,{default:t(()=>[e(v,{span:24},{default:t(()=>[e(u,{label:"储蓄卡",name:"position","label-col":{span:1},"wrapper-col":{span:23}},{default:t(()=>[a(I)?(p(),y(S,{key:0,value:a(s).position,"onUpdate:value":n[0]||(n[0]=o=>a(s).position=o),"button-style":"solid"},{default:t(()=>[(p(!0),x(C,null,E(a(D),o=>(p(),y(c,{style:{margin:"0 10px 10px 0"},key:o.name,value:o.name==="全部"?"":o.name},{default:t(()=>[r(A(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])):z("",!0)]),_:1})]),_:1}),e(v,{span:6},{default:t(()=>[e(u,{label:"时 间",name:"time"},{default:t(()=>[e(N,{value:a(s).time,"onUpdate:value":n[1]||(n[1]=o=>a(s).time=o),"value-format":"YYYY-MM-DD",onKeydown:B(d,["enter","native"])},null,8,["value","onKeydown"])]),_:1})]),_:1}),e(v,{span:6},{default:t(()=>[e(u,{label:"类 型",name:"type"},{default:t(()=>[e(S,{value:a(s).type,"onUpdate:value":n[2]||(n[2]=o=>a(s).type=o),"button-style":"solid",onKeydown:B(d,["enter","native"])},{default:t(()=>[e(c,{value:""},{default:t(()=>[r("全部")]),_:1}),e(c,{value:"收入"},{default:t(()=>[r("收入")]),_:1}),e(c,{value:"支出"},{default:t(()=>[r("支出")]),_:1})]),_:1},8,["value","onKeydown"])]),_:1})]),_:1}),e(v,{span:6},{default:t(()=>[e(u,{label:"名 目",name:"title"},{default:t(()=>[e(F,{value:a(s).title,"onUpdate:value":n[3]||(n[3]=o=>a(s).title=o),placeholder:"请输入名目",onKeydown:B(d,["enter","native"])},null,8,["value","onKeydown"])]),_:1})]),_:1}),e(v,{span:6},{default:t(()=>[e(u,{"wrapper-col":{offset:4,span:20}},{default:t(()=>[e(_,{type:"primary","html-type":"submit"},{default:t(()=>[r("提交")]),_:1}),e(_,{style:{"margin-left":"10px"},onClick:Z},{default:t(()=>[r("重置")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),w("div",Ke,[e(_,{type:"primary",onClick:W},{default:t(()=>[r("创建账单")]),_:1}),e(_,{type:"primary",style:{"margin-left":"10px"}},{default:t(()=>[r("工资收入汇总")]),_:1}),e(_,{type:"primary",style:{"margin-left":"10px"}},{default:t(()=>[r("月支出汇总")]),_:1}),e(_,{type:"primary",style:{"margin-left":"10px"}},{default:t(()=>[r("卡余额汇总")]),_:1})]),e(L,{total:a(g),currentPage:a(s).currentPage,pageSizes:a(s).pageSizes,onOnpagechange:V,onOnsizechange:R},null,8,["total","currentPage","pageSizes"]),w("div",Oe,[a(h)?(p(),y(oe,{key:0,dataSource:a(P),columns:a(G),pagination:!1},{bodyCell:t(({column:o,record:b,index:Ve})=>[o.key==="ico"?(p(),y(ne,{key:0,width:100,preview:!1,src:b.ico},null,8,["src"])):o.key==="type"?(p(),x(C,{key:1},[b.type==="收入"?(p(),y(T,{key:0,color:"green"},{default:t(()=>[r("收入")]),_:1})):b.type==="支出"?(p(),y(T,{key:1,color:"red"},{default:t(()=>[r("支出")]),_:1})):z("",!0)],64)):o.key==="debitcard"?(p(),x(C,{key:2},[e(_,{type:"dashed",onClick:ue=>J(b)},{default:t(()=>[r("修改")]),_:2},1032,["onClick"]),e(_,{type:"dashed",danger:"",onClick:ue=>Q(b._id),style:{"margin-left":"10px"}},{default:t(()=>[r("删除")]),_:2},1032,["onClick"])],64)):z("",!0)]),_:1},8,["dataSource","columns"])):z("",!0)]),w("div",Ye,[e(L,{total:a(g),currentPage:a(s).currentPage,pageSizes:a(s).pageSizes,onOnpagechange:V,onOnsizechange:R},null,8,["total","currentPage","pageSizes"])]),e(le,{total:a(g),currentPage:a(s).currentPage,pageSizes:a(s).pageSizes,onOnpageturning:ee},null,8,["total","currentPage","pageSizes"]),e(ie,{onOnTo:te}),e(re,{visible:a(m).state,"onUpdate:visible":n[10]||(n[10]=o=>a(m).state=o),footer:null,width:"30%",maskClosable:!1,destroyOnClose:!0,onCancel:X,title:a(m).title},{default:t(()=>[w("div",null,[e($,{ref_key:"formRef",ref:O,model:a(i),name:"basic","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",onFinish:j},{default:t(()=>[e(u,{label:"类型",name:"type"},{default:t(()=>[e(S,{value:a(i).type,"onUpdate:value":n[4]||(n[4]=o=>a(i).type=o),"button-style":"solid"},{default:t(()=>[e(c,{value:"收入"},{default:t(()=>[r("收入")]),_:1}),e(c,{value:"支出"},{default:t(()=>[r("支出")]),_:1})]),_:1},8,["value"])]),_:1}),e(u,{label:"时间",name:"time",rules:[{required:!0,message:"请选择时间!"}]},{default:t(()=>[e(N,{value:a(i).time,"onUpdate:value":n[5]||(n[5]=o=>a(i).time=o),"value-format":"YYYY-MM-DD"},null,8,["value"])]),_:1}),e(u,{label:"储蓄卡",name:"position",rules:[{required:!0,message:"请选择储蓄卡!"}]},{default:t(()=>[e(S,{value:a(i).position,"onUpdate:value":n[6]||(n[6]=o=>a(i).position=o),"button-style":"solid"},{default:t(()=>[(p(!0),x(C,null,E(a(K),o=>(p(),y(c,{key:o.name,style:{"margin-left":"5px","margin-bottom":"5px"},value:o.name},{default:t(()=>[r(A(o.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(u,{label:"金额",name:"money",rules:[{required:!0,message:"请输入金额!"}]},{default:t(()=>[e(F,{value:a(i).money,"onUpdate:value":n[7]||(n[7]=o=>a(i).money=o),placeholder:"请输入金额","allow-clear":"",suffix:"￥"},null,8,["value"])]),_:1}),e(u,{label:"名目",name:"title",rules:[{required:!0,message:"请输入名目!"}]},{default:t(()=>[e(F,{value:a(i).title,"onUpdate:value":n[8]||(n[8]=o=>a(i).title=o),placeholder:"请输入名目","allow-clear":""},null,8,["value"])]),_:1}),e(u,{label:"备注",name:"notes"},{default:t(()=>[e(se,{value:a(i).notes,"onUpdate:value":n[9]||(n[9]=o=>a(i).notes=o),placeholder:"请输入备注","allow-clear":"","auto-size":{minRows:3,maxRows:5},"show-count":"",maxlength:100},null,8,["value"])]),_:1}),e(u,{"wrapper-col":{offset:15,span:9}},{default:t(()=>[e(_,{onClick:M},{default:t(()=>[r("重置")]),_:1}),e(_,{style:{"margin-left":"10px"},type:"primary","html-type":"submit"},{default:t(()=>[r("提交")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible","title"])])}}};export{ct as default};
