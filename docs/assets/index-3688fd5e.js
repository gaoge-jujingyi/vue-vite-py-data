import{d as M,r as A,u as $,l as q,ae as J,b as G,n as N,o as K,ao as B,i as l,c,h as d,P as Q,a9 as U}from"./index-71a5391b.js";import{u as Y,a as Z,r as ee,d as ae}from"./index-8134270f.js";import{R as te,e as re}from"./index-3ade0bc5.js";import{e as ne}from"./eagerComputed-c651f318.js";import{_ as oe}from"./ArrowLeftOutlined-83eed4e5.js";var ie=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:Q.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},le=M({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:ie(),slots:["icon"],setup:function(e,S){var P=S.slots,o=S.attrs,g=A(!0),y=A(!1),x=A(1),i=A(null),h=A(null),O=$("avatar",e),p=O.prefixCls,j=Y(),n=q(function(){return e.size==="default"?j.value:e.size}),T=Z(),u=ne(function(){if(J(e.size)==="object"){var a=ee.find(function(r){return T.value[r]}),t=e.size[a];return t}}),k=function(t){return u.value?{width:"".concat(u.value,"px"),height:"".concat(u.value,"px"),lineHeight:"".concat(u.value,"px"),fontSize:"".concat(t?u.value/2:18,"px")}:{}},v=function(){if(!(!i.value||!h.value)){var t=i.value.offsetWidth,r=h.value.offsetWidth;if(t!==0&&r!==0){var s=e.gap,z=s===void 0?4:s;z*2<r&&(x.value=r-z*2<t?(r-z*2)/t:1)}}},C=function(){var t=e.loadError,r=t==null?void 0:t();r!==!1&&(g.value=!1)};return G(function(){return e.src},function(){N(function(){g.value=!0,x.value=1})}),G(function(){return e.gap},function(){N(function(){v()})}),K(function(){N(function(){v(),y.value=!0})}),function(){var a,t,r=e.shape,s=e.src,z=e.alt,H=e.srcset,w=e.draggable,D=e.crossOrigin,b=B(P,e,"icon"),f=p.value,F=(a={},l(a,"".concat(o.class),!!o.class),l(a,f,!0),l(a,"".concat(f,"-lg"),n.value==="large"),l(a,"".concat(f,"-sm"),n.value==="small"),l(a,"".concat(f,"-").concat(r),r),l(a,"".concat(f,"-image"),s&&g.value),l(a,"".concat(f,"-icon"),b),a),L=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:b?"".concat(n.value/2,"px"):"18px"}:{},W=(t=P.default)===null||t===void 0?void 0:t.call(P),_;if(s&&g.value)_=c("img",{draggable:w,src:s,srcset:H,onError:C,alt:z,crossorigin:D},null);else if(b)_=b;else if(y.value||x.value!==1){var I="scale(".concat(x.value,") translateX(-50%)"),V={msTransform:I,WebkitTransform:I,transform:I},X=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};_=c(te,{onResize:v},{default:function(){return[c("span",{class:"".concat(f,"-string"),ref:i,style:d(d({},X),V)},[W])]}})}else _=c("span",{class:"".concat(f,"-string"),ref:i,style:{opacity:0}},[W]);return c("span",d(d({},o),{},{ref:h,class:F,style:[L,k(!!b),o.style]}),[_])}}});const E=le;var se=function(){return{prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"}}},ce=M({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:se(),setup:function(e,S){var P=S.slots,o=S.attrs,g=$("avatar-group",e),y=g.prefixCls,x=g.direction;return ae(e),function(){var i,h=e.maxPopoverPlacement,O=h===void 0?"top":h,p=e.maxCount,j=e.maxStyle,n=e.maxPopoverTrigger,T=n===void 0?"hover":n,u=(i={},l(i,y.value,!0),l(i,"".concat(y.value,"-rtl"),x.value==="rtl"),l(i,"".concat(o.class),!!o.class),i),k=B(P,e),v=U(k).map(function(r,s){return re(r,{key:"avatar-key-".concat(s)})}),C=v.length;if(p&&p<C){var a=v.slice(0,p),t=v.slice(p,C);return a.push(c(oe,{key:"avatar-popover-key",content:t,trigger:T,placement:O,overlayClassName:"".concat(y.value,"-popover")},{default:function(){return[c(E,{style:j},{default:function(){return["+".concat(C-p)]}})]}})),c("div",d(d({},o),{},{class:u,style:o.style}),[a])}return c("div",d(d({},o),{},{class:u,style:o.style}),[v])}}});const R=ce;E.Group=R;E.install=function(m){return m.component(E.name,E),m.component(R.name,R),m};export{E as A};
